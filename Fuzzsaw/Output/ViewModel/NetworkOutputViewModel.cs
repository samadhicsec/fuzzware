using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using Fuzzware.Schemas.AutoGenerated;
using Fuzzware.Fuzzsaw.Common.ViewModel;

namespace Fuzzware.Fuzzsaw.Output.ViewModel
{
    public class NetworkOutputViewModel : OutputBaseViewModel, IOutputHandler
    {
        #region Dependency Properties

        static readonly DependencyProperty OutputViewModelProperty = DependencyProperty.Register("OutputViewModel", typeof(NetworkOutputControlViewModel), typeof(NetworkOutputViewModel));
        public NetworkOutputControlViewModel OutputViewModel
        {
            get { return (NetworkOutputControlViewModel)GetValue(OutputViewModelProperty); }
            set { SetValue(OutputViewModelProperty, value); }
        }

        #endregion

        public NetworkOutputViewModel()
        {
            OutputViewModel = new NetworkOutputControlViewModel();
        }

        #region IOutputHandler Members

        public Type GetDataOutputHandlerItemType()
        {
            return typeof(Fuzzware.Schemas.AutoGenerated.OutputToNetwork);
        }

        public EvaluationMethod EvaluationMethod
        {
            get
            {
                m_oEvaluationMethod.Item = OutputViewModel.GetOutputToNetwork();

                return m_oEvaluationMethod;
            }
            set
            {
                if (!(value.Item is Fuzzware.Schemas.AutoGenerated.OutputToNetwork))
                    return;

                m_oEvaluationMethod = value;
                OutputViewModel = new NetworkOutputControlViewModel((Fuzzware.Schemas.AutoGenerated.OutputToNetwork)m_oEvaluationMethod.Item);
            }
        }

        #endregion
    }
}
